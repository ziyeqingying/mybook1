language: node_js
branches:
  only:
  - master
install:
 - npm install -g gitbook-cli
script:
- gitbook build
deploy:
  provider: pages
  skip-cleanup: true
  github-token: $GH_TOKEN
  local-dir: ./_book/ ## 根据情况自定义到静态文件输出目录
  target-branch: gh-pages
  verbose: true
  on:
    branch: master

after_script:
   - cd ./_book
   - git init
   - git config user.name "ziyeqingying"
   - git config user.email "1220167224@qq.com"
   - git add .
   - git commit -m "Update Gitbook By TravisCI With Build $TRAVIS_BUILD_NUMBER"
   - git push --force --quiet "https://ziyeqingying:${GH_TOKEN}@${GH_REF}" master:master
   - git tag v0.0.$TRAVIS_BUILD_NUMBER -a -m "Auto Taged By TravisCI With Build $TRAVIS_BUILD_NUMBER"
   - git push --quiet "https://ziyeqingying:${GH_TOKEN}@${GH_REF}" master:master --tags


